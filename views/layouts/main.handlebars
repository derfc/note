<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}'s note</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    {{!-- <link rel="stylesheet" href="style.css" /> --}}
  </head>
  <body>
    {{{body}}}
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
      integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
      crossorigin="anonymous"
    ></script>
    {{!-- <script src="../../script.js"></script> --}}
    <script>
      $(document).ready(() => {
        let userName = "{{title}}"
        console.log(userName)
      $.get(`http://localhost:8080/note`)
      .done((data)=>{
        let notes = []
        for(let i=0; i<data.length; i++){
          if (Object.keys(data[i]).includes(userName)){
            console.log("hi", data[i])
            console.log(data[i].on9jai)
            notes.push(data[i].{{title}})
          }
        }
        console.log(notes)
        return notes.map((notes, index)=>$("#existingNotes").append(`<li>${notes}<form action="/note/${userName}/${index}" method="DELETE">
        <button name="${userName}" id="${index}" value="delete">delete</button>
        </form></li>`))
        })
      .fail(()=>console.log("fail"))
      .always(()=>console.log("running"))
      })
    </script>
  </body>
</html>
